{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\2020-2021\\\\II\\\\aws\\\\project\\\\TechComeReact\\\\e-commerce-app-react-native\\\\src\\\\screens\\\\FavoriteScreen\\\\components\\\\FavoriteItem.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Swipeable from \"react-native-gesture-handler/Swipeable\";\nimport { useDispatch } from \"react-redux\";\nimport { addToCart, removeFavorite } from \"../../../reducers\";\nimport Colors from \"../../../utils/Colors\";\nimport NumberFormat from \"react-number-format\";\nimport CustomText from \"../../../components/UI/CustomText\";\nimport PropTypes from \"prop-types\";\nexport var renderRightAction = function renderRightAction(text, color, action, x, progress) {\n  var trans = progress.interpolate({\n    inputRange: [0, 1],\n    outputRange: [x, 0]\n  });\n  return React.createElement(Animated.View, {\n    style: {\n      flex: 1,\n      transform: [{\n        translateX: trans\n      }]\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: [styles.rightAction, {\n      backgroundColor: color\n    }],\n    onPress: action,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.actionText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, text)));\n};\nexport var FavoriteItem = function FavoriteItem(_ref) {\n  var navigation = _ref.navigation,\n      item = _ref.item;\n\n  var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var unmounted = useRef(false);\n  useEffect(function () {\n    return function () {\n      unmounted.current = true;\n    };\n  }, []);\n  var dispatch = useDispatch();\n\n  var addToCartAct = function addToCartAct() {\n    return _regeneratorRuntime.async(function addToCartAct$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(dispatch(addToCart(item)));\n\n          case 3:\n            if (!unmounted.current) {\n              Alert.alert(\"Thêm thành công\", \"Sản phẩm đã được thêm vào giỏ hàng\", [{\n                text: \"OK\"\n              }]);\n            }\n\n            _context.next = 9;\n            break;\n\n          case 6:\n            _context.prev = 6;\n            _context.t0 = _context[\"catch\"](0);\n            throw _context.t0;\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 6]], Promise);\n  };\n\n  var removeFavoriteAct = function removeFavoriteAct() {\n    Alert.alert(\"Bỏ yêu thích\", \"Bạn có muốn bỏ sản phẩm ra khỏi mục yêu thích?\", [{\n      text: \"Hủy\",\n      style: \"cancel\"\n    }, {\n      text: \"Đồng ý\",\n      onPress: function onPress() {\n        return dispatch(removeFavorite(item._id));\n      }\n    }]);\n  };\n\n  var RightActions = function RightActions(progress) {\n    return React.createElement(View, {\n      style: {\n        width: 170,\n        flexDirection: \"row\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, renderRightAction(\"Thêm vào giỏ\", \"#ffab00\", addToCartAct, 140, progress), renderRightAction(\"Bỏ thích\", Colors.red, removeFavoriteAct, 30, progress));\n  };\n\n  return React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, React.createElement(Swipeable, {\n    friction: 2,\n    rightThreshold: 20,\n    renderRightActions: RightActions,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.itemContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate(\"Detail\", {\n        item: item\n      });\n    },\n    style: {\n      marginLeft: 5,\n      width: \"30%\",\n      height: \"100%\",\n      marginRight: 10,\n      alignContent: \"center\",\n      justifyContent: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    style: {\n      height: 70,\n      width: \"100%\",\n      resizeMode: \"contain\",\n      borderRadius: 10\n    },\n    source: {\n      uri: item.thumb\n    },\n    onLoadStart: function onLoadStart() {\n      setIsLoading(true);\n    },\n    onLoadEnd: function onLoadEnd() {\n      return setIsLoading(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }), isLoading && React.createElement(View, {\n    style: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: Colors.grey,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }))), React.createElement(View, {\n    style: styles.info,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, React.createElement(CustomText, {\n    style: styles.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, item.filename), React.createElement(CustomText, {\n    style: styles.subText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, item.type), React.createElement(View, {\n    style: styles.rateContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, React.createElement(NumberFormat, {\n    value: item.price,\n    displayType: \"text\",\n    thousandSeparator: true,\n    suffix: \" đ\",\n    renderText: function renderText(formattedValue) {\n      return React.createElement(View, {\n        style: styles.priceContainer,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 19\n        }\n      }, React.createElement(CustomText, {\n        style: styles.price,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 21\n        }\n      }, formattedValue));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }))))));\n};\nFavoriteItem.propTypes = {\n  item: PropTypes.object.isRequired,\n  navigation: PropTypes.object.isRequired\n};\nvar styles = StyleSheet.create({\n  itemContainer: {\n    height: 90,\n    flexDirection: \"row\",\n    backgroundColor: Colors.light_grey,\n    marginTop: 5,\n    borderRadius: 0,\n    alignItems: \"center\"\n  },\n  info: {\n    height: \"100%\",\n    flexDirection: \"column\",\n    justifyContent: \"flex-start\",\n    paddingVertical: 10,\n    width: \"75%\"\n  },\n  title: {\n    fontSize: 15\n  },\n  subText: {\n    fontSize: 13,\n    color: Colors.grey\n  },\n  rateContainer: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n    width: \"70%\"\n  },\n  rate: {\n    flexDirection: \"row\",\n    alignItems: \"flex-end\",\n    paddingBottom: 5\n  },\n  score: {\n    fontSize: 12,\n    marginLeft: 5,\n    color: Colors.grey\n  },\n  priceContainer: {\n    flexDirection: \"row\",\n    alignItems: \"center\"\n  },\n  price: {\n    fontSize: 13,\n    color: Colors.red\n  },\n  action: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingHorizontal: 5\n  },\n  rightAction: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginVertical: 6,\n    flexDirection: \"row\",\n    height: 90\n  },\n  actionText: {\n    color: \"white\",\n    fontSize: 11,\n    backgroundColor: \"transparent\",\n    padding: 5\n  }\n});","map":{"version":3,"sources":["D:/2020-2021/II/aws/project/TechComeReact/e-commerce-app-react-native/src/screens/FavoriteScreen/components/FavoriteItem.js"],"names":["React","useState","useEffect","useRef","Swipeable","useDispatch","addToCart","removeFavorite","Colors","NumberFormat","CustomText","PropTypes","renderRightAction","text","color","action","x","progress","trans","interpolate","inputRange","outputRange","flex","transform","translateX","styles","rightAction","backgroundColor","actionText","FavoriteItem","navigation","item","isLoading","setIsLoading","unmounted","current","dispatch","addToCartAct","Alert","alert","removeFavoriteAct","style","onPress","_id","RightActions","width","flexDirection","red","itemContainer","navigate","marginLeft","height","marginRight","alignContent","justifyContent","resizeMode","borderRadius","uri","thumb","position","alignItems","grey","info","title","filename","subText","type","rateContainer","price","formattedValue","priceContainer","propTypes","object","isRequired","StyleSheet","create","light_grey","marginTop","paddingVertical","fontSize","rate","paddingBottom","score","paddingHorizontal","marginVertical","padding"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport {\r\n  View,\r\n  Text,\r\n  Image,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  ActivityIndicator,\r\n  Animated,\r\n  Alert,\r\n} from \"react-native\";\r\nimport Swipeable from \"react-native-gesture-handler/Swipeable\";\r\n//Redux\r\nimport { useDispatch } from \"react-redux\";\r\n// Action\r\nimport { addToCart, removeFavorite } from \"../../../reducers\";\r\n//Color\r\nimport Colors from \"../../../utils/Colors\";\r\n//number format\r\nimport NumberFormat from \"react-number-format\";\r\n//Text\r\nimport CustomText from \"../../../components/UI/CustomText\";\r\n//PropTypes check\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport const renderRightAction = (text, color, action, x, progress) => {\r\n  const trans = progress.interpolate({\r\n    inputRange: [0, 1],\r\n    outputRange: [x, 0],\r\n  });\r\n  return (\r\n    <Animated.View style={{ flex: 1, transform: [{ translateX: trans }] }}>\r\n      <TouchableOpacity\r\n        style={[styles.rightAction, { backgroundColor: color }]}\r\n        onPress={action}\r\n      >\r\n        <Text style={styles.actionText}>{text}</Text>\r\n      </TouchableOpacity>\r\n    </Animated.View>\r\n  );\r\n};\r\n\r\nexport const FavoriteItem = ({ navigation, item }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const unmounted = useRef(false);\r\n  useEffect(() => {\r\n    return () => {\r\n      unmounted.current = true;\r\n    };\r\n  }, []);\r\n  const dispatch = useDispatch();\r\n  const addToCartAct = async () => {\r\n    try {\r\n      await dispatch(addToCart(item));\r\n      if (!unmounted.current) {\r\n        Alert.alert(\"Thêm thành công\", \"Sản phẩm đã được thêm vào giỏ hàng\", [\r\n          {\r\n            text: \"OK\",\r\n          },\r\n        ]);\r\n      }\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n  const removeFavoriteAct = () => {\r\n    Alert.alert(\r\n      \"Bỏ yêu thích\",\r\n      \"Bạn có muốn bỏ sản phẩm ra khỏi mục yêu thích?\",\r\n      [\r\n        {\r\n          text: \"Hủy\",\r\n          style: \"cancel\",\r\n        },\r\n        {\r\n          text: \"Đồng ý\",\r\n          onPress: () => dispatch(removeFavorite(item._id)),\r\n        },\r\n      ]\r\n    );\r\n  };\r\n  const RightActions = (progress) => {\r\n    return (\r\n      <View style={{ width: 170, flexDirection: \"row\" }}>\r\n        {renderRightAction(\r\n          \"Thêm vào giỏ\",\r\n          \"#ffab00\",\r\n          addToCartAct,\r\n          140,\r\n          progress\r\n        )}\r\n        {renderRightAction(\r\n          \"Bỏ thích\",\r\n          Colors.red,\r\n          removeFavoriteAct,\r\n          30,\r\n          progress\r\n        )}\r\n      </View>\r\n    );\r\n  };\r\n  return (\r\n    <View>\r\n      <Swipeable\r\n        friction={2}\r\n        rightThreshold={20}\r\n        renderRightActions={RightActions}\r\n      >\r\n        <View style={styles.itemContainer}>\r\n          <TouchableOpacity\r\n            onPress={() => navigation.navigate(\"Detail\", { item: item })}\r\n            style={{\r\n              marginLeft: 5,\r\n              width: \"30%\",\r\n              height: \"100%\",\r\n              marginRight: 10,\r\n              alignContent: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            <Image\r\n              style={{\r\n                height: 70,\r\n                width: \"100%\",\r\n                resizeMode: \"contain\",\r\n                borderRadius: 10,\r\n              }}\r\n              source={{ uri: item.thumb }}\r\n              onLoadStart={() => {\r\n                setIsLoading(true);\r\n              }}\r\n              onLoadEnd={() => setIsLoading(false)}\r\n            />\r\n            {isLoading && (\r\n              <View\r\n                style={{\r\n                  position: \"absolute\",\r\n                  width: \"100%\",\r\n                  height: \"100%\",\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"center\",\r\n                }}\r\n              >\r\n                <ActivityIndicator size='small' color={Colors.grey} />\r\n              </View>\r\n            )}\r\n          </TouchableOpacity>\r\n          <View style={styles.info}>\r\n            <CustomText style={styles.title}>{item.filename}</CustomText>\r\n            <CustomText style={styles.subText}>{item.type}</CustomText>\r\n            <View style={styles.rateContainer}>\r\n              <NumberFormat\r\n                value={item.price}\r\n                displayType={\"text\"}\r\n                thousandSeparator={true}\r\n                suffix={\" đ\"}\r\n                renderText={(formattedValue) => (\r\n                  <View style={styles.priceContainer}>\r\n                    <CustomText style={styles.price}>\r\n                      {formattedValue}\r\n                    </CustomText>\r\n                  </View>\r\n                )}\r\n              />\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </Swipeable>\r\n    </View>\r\n  );\r\n};\r\n\r\nFavoriteItem.propTypes = {\r\n  item: PropTypes.object.isRequired,\r\n  navigation: PropTypes.object.isRequired,\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  itemContainer: {\r\n    height: 90,\r\n    flexDirection: \"row\",\r\n    backgroundColor: Colors.light_grey,\r\n    marginTop: 5,\r\n    borderRadius: 0,\r\n    alignItems: \"center\",\r\n  },\r\n  info: {\r\n    height: \"100%\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"flex-start\",\r\n    paddingVertical: 10,\r\n    width: \"75%\",\r\n  },\r\n  title: {\r\n    fontSize: 15,\r\n  },\r\n  subText: {\r\n    fontSize: 13,\r\n\r\n    color: Colors.grey,\r\n  },\r\n  rateContainer: {\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-between\",\r\n    width: \"70%\",\r\n  },\r\n  rate: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"flex-end\",\r\n    paddingBottom: 5,\r\n  },\r\n  score: {\r\n    fontSize: 12,\r\n    marginLeft: 5,\r\n    color: Colors.grey,\r\n  },\r\n  priceContainer: {\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n  },\r\n  price: {\r\n    fontSize: 13,\r\n    color: Colors.red,\r\n  },\r\n  action: {\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    paddingHorizontal: 5,\r\n  },\r\n  rightAction: {\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    marginVertical: 6,\r\n    flexDirection: \"row\",\r\n    height: 90,\r\n  },\r\n  actionText: {\r\n    color: \"white\",\r\n    fontSize: 11,\r\n    backgroundColor: \"transparent\",\r\n    padding: 5,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}