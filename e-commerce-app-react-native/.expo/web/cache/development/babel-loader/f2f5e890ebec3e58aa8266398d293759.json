{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\2020-2021\\\\II\\\\aws\\\\project\\\\TechComeReact\\\\e-commerce-app-react-native\\\\src\\\\screens\\\\SignupScreen\\\\components\\\\SignupForm.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { Field, reduxForm } from \"redux-form\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Colors from \"../../../utils/Colors\";\nimport CustomText from \"../../../components/UI/CustomText\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { SignUp as SignUpAct } from \"../../../reducers\";\nimport PropTypes from \"prop-types\";\nimport renderField from \"./RenderField\";\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nvar validate = function validate(values) {\n  var errors = {};\n\n  if (!values.email) {\n    errors.email = \"Email không được bỏ trống\";\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\n    errors.email = \"Email không hơp lệ\";\n  }\n\n  if (!values.password) {\n    errors.password = \"Mật khẩu không được bỏ trống\";\n  } else if (values.password.length < 6) {\n    errors.password = \"Mật khẩu phải nhiều hơn hoặc bằng 6 ký tự\";\n  }\n\n  if (!values.confirmpassword) {\n    errors.confirmpassword = \"Mật khẩu không được bỏ trống\";\n  } else if (values.confirmpassword !== values.password) {\n    errors.confirmpassword = \"Mật khẩu xác nhận không trùng khớp\";\n  }\n\n  if (!values.username) {\n    errors.username = \"Tên không được bỏ trống\";\n  } else if (values.username.length > 20) {\n    errors.username = \"Tên không vượt quá 20 ký tự\";\n  } else if (values.username.length < 6) {\n    errors.username = \"Tên phải nhiều hơn 6 ký tự\";\n  }\n\n  return errors;\n};\n\nvar Signup = function Signup(props) {\n  var handleSubmit = props.handleSubmit,\n      reset = props.reset;\n  var dispatch = useDispatch();\n  var loading = useSelector(function (state) {\n    return state.auth.isLoading;\n  });\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showPass = _useState2[0],\n      setShowPass = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      showConfirmPass = _useState4[0],\n      setshowConfirmPass = _useState4[1];\n\n  var unmounted = useRef(false);\n  useEffect(function () {\n    return function () {\n      unmounted.current = true;\n    };\n  }, []);\n\n  var submit = function submit(values) {\n    return _regeneratorRuntime.async(function submit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(dispatch(SignUpAct(values.username, values.email, values.password)));\n\n          case 3:\n            reset();\n\n            if (!unmounted.current) {\n              Alert.alert(\"Signup Successfully\", \"You can login now\", [{\n                text: \"Okay\",\n                onPress: function onPress() {\n                  props.navigation.goBack();\n                }\n              }]);\n            }\n\n            _context.next = 10;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            alert(_context.t0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  return React.createElement(KeyboardAvoidingView, {\n    behavior: Platform.OS == \"ios\" ? \"position\" : \"height\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      props.navigation.goBack();\n    },\n    style: {\n      position: \"absolute\",\n      top: 50,\n      left: 20,\n      zIndex: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, React.createElement(Ionicons, {\n    name: \"ios-arrow-back\",\n    size: 35,\n    color: Colors.light_green,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  })), React.createElement(View, {\n    style: styles.header,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }), React.createElement(ScrollView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableWithoutFeedback, {\n    onPress: Keyboard.dismiss,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: \"column\",\n      marginHorizontal: 10,\n      zIndex: 0\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, React.createElement(CustomText, {\n    style: styles.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  }, \"REGISTER\")), React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }, React.createElement(Field, {\n    name: \"username\",\n    keyboardType: \"default\",\n    label: \"Your Name\",\n    component: renderField,\n    icon: \"id-card\",\n    autoCapitalize: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }), React.createElement(Field, {\n    name: \"email\",\n    keyboardType: \"email-address\",\n    label: \"Email\",\n    icon: \"email\",\n    component: renderField,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }), React.createElement(Field, {\n    name: \"password\",\n    keyboardType: \"default\",\n    label: \"Password\",\n    component: renderField,\n    secureTextEntry: showPass ? false : true,\n    passIcon: \"pass\",\n    icon: \"lock\",\n    showPass: showPass,\n    setShowPass: setShowPass,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }), React.createElement(Field, {\n    name: \"confirmpassword\",\n    keyboardType: \"default\",\n    label: \"Confirm Password\",\n    component: renderField,\n    secureTextEntry: showConfirmPass ? false : true,\n    passIcon: \"confirm\",\n    icon: \"lock\",\n    showConfirmPass: showConfirmPass,\n    setshowConfirmPass: setshowConfirmPass,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: handleSubmit(submit),\n    style: {\n      marginVertical: 10,\n      alignItems: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: styles.signIn,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, loading ? React.createElement(ActivityIndicator, {\n    size: \"small\",\n    color: \"#fff\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 19\n    }\n  }) : React.createElement(CustomText, {\n    style: styles.textSign,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 19\n    }\n  }, \"\\u0110\\u0103ng k\\xFD\"))), React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  })))));\n};\n\nSignup.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  reset: PropTypes.func.isRequired\n};\nvar styles = StyleSheet.create({\n  header: {\n    marginTop: height * 0.15,\n    width: width,\n    marginBottom: 40,\n    paddingHorizontal: 20,\n    backgroundColor: Colors.white,\n    zIndex: 1\n  },\n  signIn: {\n    width: \"100%\",\n    height: 50,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    borderRadius: 5,\n    flexDirection: \"row\",\n    backgroundColor: Colors.lighter_green,\n    marginTop: 10\n  },\n  title: {\n    color: Colors.light_green,\n    fontSize: 40,\n    letterSpacing: 5,\n    fontFamily: \"Roboto-Bold\",\n    textAlign: \"center\"\n  },\n  textSign: {\n    fontSize: 15,\n    color: \"#fff\",\n    fontFamily: \"Roboto-Medium\"\n  },\n  textSignSmall: {\n    color: Colors.lighter_green,\n    textAlign: \"center\"\n  }\n});\nexport var SignupForm = reduxForm({\n  form: \"signup\",\n  validate: validate\n})(Signup);","map":{"version":3,"sources":["D:/2020-2021/II/aws/project/TechComeReact/e-commerce-app-react-native/src/screens/SignupScreen/components/SignupForm.js"],"names":["React","useState","useRef","useEffect","Field","reduxForm","Colors","CustomText","Ionicons","useDispatch","useSelector","SignUp","SignUpAct","PropTypes","renderField","Dimensions","get","width","height","validate","values","errors","email","test","password","length","confirmpassword","username","Signup","props","handleSubmit","reset","dispatch","loading","state","auth","isLoading","showPass","setShowPass","showConfirmPass","setshowConfirmPass","unmounted","current","submit","Alert","alert","text","onPress","navigation","goBack","Platform","OS","position","top","left","zIndex","light_green","styles","header","Keyboard","dismiss","flexDirection","marginHorizontal","title","marginVertical","alignItems","signIn","textSign","flex","propTypes","func","isRequired","StyleSheet","create","marginTop","marginBottom","paddingHorizontal","backgroundColor","white","justifyContent","borderRadius","lighter_green","color","fontSize","letterSpacing","fontFamily","textAlign","textSignSmall","SignupForm","form"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport {\r\n  StyleSheet,\r\n  View,\r\n  TouchableOpacity,\r\n  Keyboard,\r\n  TouchableWithoutFeedback,\r\n  ActivityIndicator,\r\n  KeyboardAvoidingView,\r\n  ScrollView,\r\n  Alert,\r\n  Dimensions,\r\n} from \"react-native\";\r\n//Colors\r\nimport Colors from \"../../../utils/Colors\";\r\nimport CustomText from \"../../../components/UI/CustomText\";\r\nimport { Ionicons } from \"@expo/vector-icons\";\r\n//Redux\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n//Action\r\nimport { SignUp as SignUpAct } from \"../../../reducers\";\r\n//PropTypes check\r\nimport PropTypes from \"prop-types\";\r\nimport renderField from \"./RenderField\";\r\n\r\nconst { width, height } = Dimensions.get(\"window\");\r\n\r\n//Validation\r\nconst validate = (values) => {\r\n  const errors = {};\r\n  if (!values.email) {\r\n    errors.email = \"Email không được bỏ trống\";\r\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n    errors.email = \"Email không hơp lệ\";\r\n  }\r\n  if (!values.password) {\r\n    errors.password = \"Mật khẩu không được bỏ trống\";\r\n  } else if (values.password.length < 6) {\r\n    errors.password = \"Mật khẩu phải nhiều hơn hoặc bằng 6 ký tự\";\r\n  }\r\n  if (!values.confirmpassword) {\r\n    errors.confirmpassword = \"Mật khẩu không được bỏ trống\";\r\n  } else if (values.confirmpassword !== values.password) {\r\n    errors.confirmpassword = \"Mật khẩu xác nhận không trùng khớp\";\r\n  }\r\n  if (!values.username) {\r\n    errors.username = \"Tên không được bỏ trống\";\r\n  } else if (values.username.length > 20) {\r\n    errors.username = \"Tên không vượt quá 20 ký tự\";\r\n  } else if (values.username.length < 6) {\r\n    errors.username = \"Tên phải nhiều hơn 6 ký tự\";\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nconst Signup = (props) => {\r\n  const { handleSubmit, reset } = props;\r\n  const dispatch = useDispatch();\r\n  const loading = useSelector((state) => state.auth.isLoading);\r\n  const [showPass, setShowPass] = useState(false);\r\n  const [showConfirmPass, setshowConfirmPass] = useState(false);\r\n  const unmounted = useRef(false);\r\n  useEffect(() => {\r\n    return () => {\r\n      unmounted.current = true;\r\n    };\r\n  }, []);\r\n\r\n  const submit = async (values) => {\r\n    try {\r\n      await dispatch(SignUpAct(values.username, values.email, values.password));\r\n      reset();\r\n      if (!unmounted.current) {\r\n        Alert.alert(\"Signup Successfully\", \"You can login now\", [\r\n          {\r\n            text: \"Okay\",\r\n            onPress: () => {\r\n              props.navigation.goBack();\r\n            },\r\n          },\r\n        ]);\r\n      }\r\n    } catch (err) {\r\n      alert(err);\r\n    }\r\n  };\r\n  return (\r\n    <KeyboardAvoidingView\r\n      behavior={Platform.OS == \"ios\" ? \"position\" : \"height\"}\r\n      // keyboardVerticalOffset={40} // adjust the value here if you need more padding\r\n      // style={{ flex: 1 }}\r\n    >\r\n      <TouchableOpacity\r\n        onPress={() => {\r\n          props.navigation.goBack();\r\n        }}\r\n        style={{ position: \"absolute\", top: 50, left: 20, zIndex: 10 }}\r\n      >\r\n        <Ionicons name=\"ios-arrow-back\" size={35} color={Colors.light_green} />\r\n      </TouchableOpacity>\r\n\r\n      <View style={styles.header}></View>\r\n      <ScrollView>\r\n        <TouchableWithoutFeedback onPress={Keyboard.dismiss}>\r\n          <View\r\n            style={{\r\n              flexDirection: \"column\",\r\n              marginHorizontal: 10,\r\n              zIndex: 0,\r\n            }}\r\n          >\r\n            <View>\r\n              <CustomText style={styles.title}>REGISTER</CustomText>\r\n            </View>\r\n            <View>\r\n              <Field\r\n                name=\"username\"\r\n                keyboardType=\"default\"\r\n                label=\"Your Name\"\r\n                component={renderField}\r\n                icon=\"id-card\"\r\n                autoCapitalize={true}\r\n              />\r\n              <Field\r\n                name=\"email\"\r\n                keyboardType=\"email-address\"\r\n                label=\"Email\"\r\n                icon=\"email\"\r\n                component={renderField}\r\n              />\r\n              <Field\r\n                name=\"password\"\r\n                keyboardType=\"default\"\r\n                label=\"Password\"\r\n                component={renderField}\r\n                secureTextEntry={showPass ? false : true}\r\n                passIcon=\"pass\"\r\n                icon=\"lock\"\r\n                showPass={showPass}\r\n                setShowPass={setShowPass}\r\n              />\r\n              <Field\r\n                name=\"confirmpassword\"\r\n                keyboardType=\"default\"\r\n                label=\"Confirm Password\"\r\n                component={renderField}\r\n                secureTextEntry={showConfirmPass ? false : true}\r\n                passIcon=\"confirm\"\r\n                icon=\"lock\"\r\n                showConfirmPass={showConfirmPass}\r\n                setshowConfirmPass={setshowConfirmPass}\r\n              />\r\n            </View>\r\n\r\n            <TouchableOpacity\r\n              onPress={handleSubmit(submit)}\r\n              style={{ marginVertical: 10, alignItems: \"center\" }}\r\n            >\r\n              <View style={styles.signIn}>\r\n                {loading ? (\r\n                  <ActivityIndicator size=\"small\" color=\"#fff\" />\r\n                ) : (\r\n                  <CustomText style={styles.textSign}>Đăng ký</CustomText>\r\n                )}\r\n              </View>\r\n            </TouchableOpacity>\r\n            <View style={{ flex: 1 }} />\r\n          </View>\r\n        </TouchableWithoutFeedback>\r\n      </ScrollView>\r\n    </KeyboardAvoidingView>\r\n  );\r\n};\r\n\r\nSignup.propTypes = {\r\n  handleSubmit: PropTypes.func.isRequired,\r\n  reset: PropTypes.func.isRequired,\r\n};\r\nconst styles = StyleSheet.create({\r\n  header: {\r\n    marginTop: height * 0.15,\r\n    width: width,\r\n    marginBottom: 40,\r\n    paddingHorizontal: 20,\r\n    backgroundColor: Colors.white,\r\n    zIndex: 1,\r\n  },\r\n  signIn: {\r\n    width: \"100%\",\r\n    height: 50,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    borderRadius: 5,\r\n    flexDirection: \"row\",\r\n    backgroundColor: Colors.lighter_green,\r\n    marginTop: 10,\r\n  },\r\n  title: {\r\n    color: Colors.light_green,\r\n    fontSize: 40,\r\n    letterSpacing: 5,\r\n    fontFamily: \"Roboto-Bold\",\r\n    textAlign: \"center\",\r\n  },\r\n  textSign: {\r\n    fontSize: 15,\r\n    color: \"#fff\",\r\n    fontFamily: \"Roboto-Medium\",\r\n  },\r\n  textSignSmall: {\r\n    color: Colors.lighter_green,\r\n    textAlign: \"center\",\r\n  },\r\n});\r\nexport const SignupForm = reduxForm({\r\n  form: \"signup\", // a unique identifier for this form\r\n  validate, // <--- validation function given to redux-form\r\n})(Signup);\r\n"]},"metadata":{},"sourceType":"module"}