{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Cart } from \"../../models/Cart\";\nimport { ADD_CART, FETCH_CART, REMOVE_FROM_CART, DES_CART_QUANTITY, RESET_CART, CART_LOADING, CART_FAILURE } from \"./cartActions\";\nimport { LOGOUT } from \"../auth/authActions\";\nvar emptyCart = {\n  items: []\n};\nvar initialState = {\n  cartItems: emptyCart,\n  isLoading: false\n};\n\nvar findIndex = function findIndex(cartList, id) {\n  var index = cartList.findIndex(function (cart) {\n    return cart.item._id === id;\n  });\n  return index;\n};\n\nexport var cartReducer = function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var cartList = state.cartItems.items;\n\n  switch (action.type) {\n    case CART_LOADING:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: true\n      });\n\n    case CART_FAILURE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: false\n      });\n\n    case FETCH_CART:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cartItems: action.carts,\n        isLoading: false\n      });\n\n    case ADD_CART:\n      var id = action.cartItem._id;\n\n      if (cartList.length !== 0) {\n        var _index = findIndex(cartList, id);\n\n        if (_index >= 0) {\n          cartList[_index] = new Cart(action.cartItem, +cartList[_index].quantity + 1);\n        } else {\n          var newItem = new Cart(action.cartItem, 1);\n          cartList.push(newItem);\n        }\n      } else {\n        var _newItem = new Cart(action.cartItem, 1);\n\n        cartList.push(_newItem);\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cartItems: _objectSpread({}, state.cartItems),\n        isLoading: false\n      });\n\n    case REMOVE_FROM_CART:\n      var itemId = action.itemId;\n      var indexItem = findIndex(cartList, itemId);\n      cartList.splice(indexItem, 1);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cartItems: _objectSpread({}, state.cartItems),\n        isLoading: false\n      });\n\n    case DES_CART_QUANTITY:\n      var cartItemId = action.cartItemId;\n      var index = findIndex(cartList, cartItemId);\n      cartList[index].quantity = +cartList[index].quantity - 1;\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cartItems: _objectSpread({}, state.cartItems),\n        isLoading: false\n      });\n\n    case RESET_CART:\n      state.cartItems.items = [];\n      return _objectSpread(_objectSpread({}, state), {}, {\n        cartItems: _objectSpread({}, state.cartItems),\n        isLoading: false\n      });\n\n    case LOGOUT:\n      {\n        return {\n          cartItems: emptyCart,\n          isLoading: false\n        };\n      }\n  }\n\n  return state;\n};","map":{"version":3,"sources":["D:/2020-2021/II/aws/project/TechComeReact/e-commerce-app-react-native/src/reducers/cart/cartReducer.js"],"names":["Cart","ADD_CART","FETCH_CART","REMOVE_FROM_CART","DES_CART_QUANTITY","RESET_CART","CART_LOADING","CART_FAILURE","LOGOUT","emptyCart","items","initialState","cartItems","isLoading","findIndex","cartList","id","index","cart","item","_id","cartReducer","state","action","type","carts","cartItem","length","quantity","newItem","push","itemId","indexItem","splice","cartItemId"],"mappings":";;;;;;AAAA,SAASA,IAAT;AACA,SACEC,QADF,EAEEC,UAFF,EAGEC,gBAHF,EAIEC,iBAJF,EAKEC,UALF,EAMEC,YANF,EAOEC,YAPF;AASA,SAASC,MAAT;AAEA,IAAMC,SAAS,GAAG;AAChBC,EAAAA,KAAK,EAAE;AADS,CAAlB;AAGA,IAAMC,YAAY,GAAG;AACnBC,EAAAA,SAAS,EAAEH,SADQ;AAEnBI,EAAAA,SAAS,EAAE;AAFQ,CAArB;;AAKA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACC,QAAD,EAAWC,EAAX,EAAkB;AAClC,MAAMC,KAAK,GAAGF,QAAQ,CAACD,SAAT,CAAmB,UAACI,IAAD,EAAU;AACzC,WAAOA,IAAI,CAACC,IAAL,CAAUC,GAAV,KAAkBJ,EAAzB;AACD,GAFa,CAAd;AAGA,SAAOC,KAAP;AACD,CALD;;AAMA,OAAO,IAAMI,WAAW,GAAG,SAAdA,WAAc,GAAkC;AAAA,MAAjCC,KAAiC,uEAAzBX,YAAyB;AAAA,MAAXY,MAAW;AAC3D,MAAMR,QAAQ,GAAGO,KAAK,CAACV,SAAN,CAAgBF,KAAjC;;AACA,UAAQa,MAAM,CAACC,IAAf;AACE,SAAKlB,YAAL;AACE,6CACKgB,KADL;AAEET,QAAAA,SAAS,EAAE;AAFb;;AAIF,SAAKN,YAAL;AACE,6CACKe,KADL;AAEET,QAAAA,SAAS,EAAE;AAFb;;AAIF,SAAKX,UAAL;AACE,6CACKoB,KADL;AAEEV,QAAAA,SAAS,EAAEW,MAAM,CAACE,KAFpB;AAGEZ,QAAAA,SAAS,EAAE;AAHb;;AAMF,SAAKZ,QAAL;AACE,UAAMe,EAAE,GAAGO,MAAM,CAACG,QAAP,CAAgBN,GAA3B;;AACA,UAAIL,QAAQ,CAACY,MAAT,KAAoB,CAAxB,EAA2B;AACzB,YAAMV,MAAK,GAAGH,SAAS,CAACC,QAAD,EAAWC,EAAX,CAAvB;;AACA,YAAIC,MAAK,IAAI,CAAb,EAAgB;AACdF,UAAAA,QAAQ,CAACE,MAAD,CAAR,GAAkB,IAAIjB,IAAJ,CAChBuB,MAAM,CAACG,QADS,EAEhB,CAACX,QAAQ,CAACE,MAAD,CAAR,CAAgBW,QAAjB,GAA4B,CAFZ,CAAlB;AAID,SALD,MAKO;AACL,cAAMC,OAAO,GAAG,IAAI7B,IAAJ,CAASuB,MAAM,CAACG,QAAhB,EAA0B,CAA1B,CAAhB;AACAX,UAAAA,QAAQ,CAACe,IAAT,CAAcD,OAAd;AACD;AACF,OAXD,MAWO;AACL,YAAMA,QAAO,GAAG,IAAI7B,IAAJ,CAASuB,MAAM,CAACG,QAAhB,EAA0B,CAA1B,CAAhB;;AACAX,QAAAA,QAAQ,CAACe,IAAT,CAAcD,QAAd;AACD;;AAED,6CACKP,KADL;AAEEV,QAAAA,SAAS,oBAAOU,KAAK,CAACV,SAAb,CAFX;AAGEC,QAAAA,SAAS,EAAE;AAHb;;AAKF,SAAKV,gBAAL;AACE,UAAQ4B,MAAR,GAAmBR,MAAnB,CAAQQ,MAAR;AACA,UAAMC,SAAS,GAAGlB,SAAS,CAACC,QAAD,EAAWgB,MAAX,CAA3B;AACAhB,MAAAA,QAAQ,CAACkB,MAAT,CAAgBD,SAAhB,EAA2B,CAA3B;AACA,6CACKV,KADL;AAEEV,QAAAA,SAAS,oBAAOU,KAAK,CAACV,SAAb,CAFX;AAGEC,QAAAA,SAAS,EAAE;AAHb;;AAKF,SAAKT,iBAAL;AACE,UAAQ8B,UAAR,GAAuBX,MAAvB,CAAQW,UAAR;AACA,UAAMjB,KAAK,GAAGH,SAAS,CAACC,QAAD,EAAWmB,UAAX,CAAvB;AACAnB,MAAAA,QAAQ,CAACE,KAAD,CAAR,CAAgBW,QAAhB,GAA2B,CAACb,QAAQ,CAACE,KAAD,CAAR,CAAgBW,QAAjB,GAA4B,CAAvD;AACA,6CACKN,KADL;AAEEV,QAAAA,SAAS,oBAAOU,KAAK,CAACV,SAAb,CAFX;AAGEC,QAAAA,SAAS,EAAE;AAHb;;AAKF,SAAKR,UAAL;AACEiB,MAAAA,KAAK,CAACV,SAAN,CAAgBF,KAAhB,GAAwB,EAAxB;AACA,6CACKY,KADL;AAEEV,QAAAA,SAAS,oBAAOU,KAAK,CAACV,SAAb,CAFX;AAGEC,QAAAA,SAAS,EAAE;AAHb;;AAKF,SAAKL,MAAL;AAAa;AACX,eAAO;AACLI,UAAAA,SAAS,EAAEH,SADN;AAELI,UAAAA,SAAS,EAAE;AAFN,SAAP;AAID;AAvEH;;AAyEA,SAAOS,KAAP;AACD,CA5EM","sourcesContent":["import { Cart } from \"../../models/Cart\";\r\nimport {\r\n  ADD_CART,\r\n  FETCH_CART,\r\n  REMOVE_FROM_CART,\r\n  DES_CART_QUANTITY,\r\n  RESET_CART,\r\n  CART_LOADING,\r\n  CART_FAILURE,\r\n} from \"./cartActions\";\r\nimport { LOGOUT } from \"../auth/authActions\";\r\n\r\nconst emptyCart = {\r\n  items: [],\r\n};\r\nconst initialState = {\r\n  cartItems: emptyCart,\r\n  isLoading: false,\r\n};\r\n\r\nconst findIndex = (cartList, id) => {\r\n  const index = cartList.findIndex((cart) => {\r\n    return cart.item._id === id;\r\n  });\r\n  return index;\r\n};\r\nexport const cartReducer = (state = initialState, action) => {\r\n  const cartList = state.cartItems.items;\r\n  switch (action.type) {\r\n    case CART_LOADING:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case CART_FAILURE:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n      };\r\n    case FETCH_CART:\r\n      return {\r\n        ...state,\r\n        cartItems: action.carts,\r\n        isLoading: false,\r\n      };\r\n\r\n    case ADD_CART:\r\n      const id = action.cartItem._id;\r\n      if (cartList.length !== 0) {\r\n        const index = findIndex(cartList, id);\r\n        if (index >= 0) {\r\n          cartList[index] = new Cart(\r\n            action.cartItem,\r\n            +cartList[index].quantity + 1\r\n          );\r\n        } else {\r\n          const newItem = new Cart(action.cartItem, 1);\r\n          cartList.push(newItem);\r\n        }\r\n      } else {\r\n        const newItem = new Cart(action.cartItem, 1);\r\n        cartList.push(newItem);\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        cartItems: { ...state.cartItems },\r\n        isLoading: false,\r\n      };\r\n    case REMOVE_FROM_CART:\r\n      const { itemId } = action;\r\n      const indexItem = findIndex(cartList, itemId);\r\n      cartList.splice(indexItem, 1);\r\n      return {\r\n        ...state,\r\n        cartItems: { ...state.cartItems },\r\n        isLoading: false,\r\n      };\r\n    case DES_CART_QUANTITY:\r\n      const { cartItemId } = action;\r\n      const index = findIndex(cartList, cartItemId);\r\n      cartList[index].quantity = +cartList[index].quantity - 1;\r\n      return {\r\n        ...state,\r\n        cartItems: { ...state.cartItems },\r\n        isLoading: false,\r\n      };\r\n    case RESET_CART:\r\n      state.cartItems.items = [];\r\n      return {\r\n        ...state,\r\n        cartItems: { ...state.cartItems },\r\n        isLoading: false,\r\n      };\r\n    case LOGOUT: {\r\n      return {\r\n        cartItems: emptyCart,\r\n        isLoading: false,\r\n      };\r\n    }\r\n  }\r\n  return state;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}